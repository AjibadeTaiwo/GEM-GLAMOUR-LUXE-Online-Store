<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Checkout Page</title>
<style>
    body { font-family: Arial; background: white; max-width:650px; margin:auto; padding:20px; }
    .box { background: navy; padding:20px; margin-bottom:20px; border-radius:8px; }
    .cart-item { border-bottom:1px solid #ddd; padding:10px 0; }
    .total { font-size:20px; margin-top:20px; font-weight:bold; }
    input, textarea, select { width:100%; padding:10px; margin:8px 0; }
    button { padding:14px; background:navy; color:white; border:none; width:100%; margin-top:10px; font-size:16px; cursor:pointer; }
</style>
</head>
<body>

<h2>Checkout</h2>

<div class="box">
    <h3>Your Cart</h3>
    <div id="cart"></div>
    <div class="total" id="total"></div>
</div>

<div class="box">
<h3>Delivery Details</h3>
<form id="checkoutForm">
    <input type="text" id="name" placeholder="Full Name" required>
    <input type="text" id="phone" placeholder="Phone Number" required>
    <textarea id="address" placeholder="Delivery Address" required></textarea>

    <label><b>Payment Method</b></label>
    <select id="payment" required>
        <option value="OPay Online Payment">OPay Online Payment</option>
        <option value="Cash on Delivery">Cash on Delivery</option>
    </select>

    <button type="submit">Proceed</button>
    
<div class="payment-info">
  <h3>Payment Information</h3>
  <p><strong>Bank:</strong>PALMPAY</p>
  <p><strong>Account Name:</strong>Taiwo Precious Ajibade</p>
  <p><strong>Account Number:</strong>8133484321</p>
</div>
</form>
</div>

                
                
            

                
        <div id="cartItems"></div>
        

            <div class="payment-section">
    
                <P>After Making Payment, Click Below to Send Proof Via WhatsApp.</P>

                <a class="whatsapp-button"
                
                <li>WhatsApp: <a href="https://wa.me/2348133484321">Chat Us</a></li>
            Send Proof On WhatsApp
        </a>
            </div>
<script>
// SAMPLE CART DATA â€” replace with your real system
let cartData = [
    { name: "Product A", price: 20, qty: 2 },
    { name: "Product B", price: 15, qty: 1 }
];

function loadCart() {
    let cartDiv = document.getElementById("cart");
    let totalPrice = 0;

    cartData.forEach(item => {
        cartDiv.innerHTML += `
            <div class="cart-item">
                <strong>${item.name}</strong><br>
                Qty: ${item.qty} <br>
                Price: $${item.price * item.qty}
            </div>
        `;
        totalPrice += item.price * item.qty;
    });

    document.getElementById("total").innerHTML = "Total: $" + totalPrice;
}
loadCart();

// SUBMIT ORDER
document.getElementById("checkoutForm").addEventListener("submit", function(e){
    e.preventDefault();

    let order = {
        name: document.getElementById("name").value,
        phone: document.getElementById("phone").value,
        address: document.getElementById("address").value,
        payment: document.getElementById("payment").value,
        cart: cartData,
        total: document.getElementById("total").innerText
    };

    // SEND ORDER TO SERVER
    fetch("save_order.php", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(order)
    });

    if (order.payment === "OPay Online Payment") {
        // REDIRECT TO OPAY PAYMENT PAGE
        fetch("opay_pay.php", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(order)
        })
        .then(res => res.json())
        .then(data => window.location.href = data.payment_url);
    } else {
        // CASH ON DELIVERY â†’ WhatsApp
        let ownerNumber = "2348133484321"; 
        let message =
            'ðŸ›’ NEW ORDER\n\n' +
            'Name: ${order.name}\n' +
            'Phone: ${order.phone}\n' +
            'Address: ${order.address}\n' +
            'Payment: ${order.payment}\n\n' +
            'Cart:\n${order.cart.map(i =>  ${i.name} x${i.qty}).join("\n")}\n\n' +
            'Total: ${order.total}`;



        
                
                
       
      
</script>
</body>
</html>

